import socket
import subprocess

try:
    # on cree un objet socket
    # socket.AF_INET : la famille d adresses, ici ce sont des adresses Internet ;
    # socket.SOCK_STREAM : le type du socket, SOCK_STREAM pour le protocole TCP.

    s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)

    # on defini le port
    port = 12345
    # connection vers le serveur
    s.connect(('127.0.0.1', port))
    cmdlet = input("$")

    while cmdlet!='quit':
        # @cmdlet : permet d'utiliser un remote shell
        # on envoie des informations au client
        # encoder: action de convertir une chaine de caracteres - str - en une chaine d octets - bytes -
        s.send(cmdlet.encode())

        # on recupere des informations (max 2048 bytes)
        # decoder: action de convertir une chaine d octets - bytes - en une chaine de caracteres - str -
        resultat = s.recv(2048).decode()

        print(resultat)

        cmdlet = input("$")

    # close the connection
    s.close()

except:
    print("une erreur est survenue...")
